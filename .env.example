# ==============================================================================
# OpenMiner - Example .env
#
# Copy this file to .env and fill in secrets locally.
# IMPORTANT: Do NOT commit .env (it contains secrets).
# ==============================================================================

# ==============================================================================
# App settings
# ==============================================================================
DEBUG=True
FORCE_OCR=True
MAX_CONCURRENT_JOBS=1
INIT_MINERU_ON_STARTUP=No

# ==============================================================================
# Output folders (optional)
# - Relative paths are resolved relative to the project root.
# - JSON output folder key is JSON_OUTPUT_DIR (preferred).
# - OUTPUT_DIR is supported for backward compatibility, but JSON_OUTPUT_DIR is recommended.
# ==============================================================================
UPLOAD_DIR=uploads
JSON_OUTPUT_DIR=outputs
CSV_OUTPUT_DIR=outputs
MINERU_OUTPUT_DIR=mineru_outputs
SHAREPOINT_DOWNLOAD_DIR=sharepoint_downloads
STATIC_DIR=static

# ==============================================================================
# AI service selection
# ==============================================================================
AI_SERVICE=azure_openai  # azure_openai or ollama
JSON_GENERATION_METHOD=azure_openai_json # mineru_json, azure_openai_json, program_json (legacy: *_csv)

# ==============================================================================
# Azure OpenAI settings (required when AI_SERVICE=azure_openai)
# ==============================================================================
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=https://openai-westus.openai.azure.com
AZURE_OPENAI_DEPLOYMENT_NAME=Extgpt-4.1
AZURE_OPENAI_API_VERSION=2025-01-01-preview
AZURE_OPENAI_TEMPERATURE=0

# Optional prompt overrides (frontend UI can override these too)
AZURE_OPENAI_SYSTEM_PROMPT=
AZURE_OPENAI_USER_PROMPT=

# ==============================================================================
# Ollama settings (required when AI_SERVICE=ollama)
# ==============================================================================
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=deepseek-r1:8b  # 可選：gemma3:1b 或 deepseek-r1:8b
OLLAMA_TIMEOUT=2000  # Ollama API 超時時間（秒）
OLLAMA_TEMPERATURE=0

# ==============================================================================
# MinerU settings
# ==============================================================================
MINERU_CMD=mineru
MINERU_METHOD=auto
MINERU_OUTPUT_SOURCE=json  # json | layout_pdf | span_pdf | both_pdf
USE_VLLM_ASYNC=True
MINERU_MODEL_NAME=opendatalab/MinerU2.5-2509-1.2B
MINERU_DEVICE=cpu

# Header/footer handling
MINERU_INCLUDE_HEADER_ZONES=True
MINERU_HEADER_ZONE_RATIO=0.01 # 頁面頂部 1% 作為標題區域
MINERU_INCLUDE_PDF_TEXT_LAYER=True
MINERU_PDF_TEXT_LAYER_MAX_LINES=300

# ==============================================================================
# SharePoint settings (optional)
# ==============================================================================
SHAREPOINT_CLIENT_ID=
SHAREPOINT_TENANT_ID=
SHAREPOINT_CLIENT_SECRET=
# Use the SharePoint *site root* URL here (no spaces). Avoid library view URLs like ".../Shared Documents/Forms/AllItems.aspx"
# because unquoted spaces can break .env parsing.
SHAREPOINT_SITE_URL=https://jebsengroup.sharepoint.com/sites/APOCR
SHAREPOINT_FOLDER=
SHAREPOINT_POLL_INTERVAL=60  # in seconds
